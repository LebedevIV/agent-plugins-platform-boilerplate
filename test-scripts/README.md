# Тестовые скрипты для Agent-Plugins-Platform

## Как правильно запускать тесты

### ❌ НЕПРАВИЛЬНО - Запуск в консоли браузера
Если вы запускаете скрипт в обычной консоли DevTools браузера на странице Ozon, вы получите ошибку:
```
TypeError: Cannot read properties of undefined (reading 'sendMessage')
```

Это происходит потому, что `chrome.runtime` недоступен в контексте обычной веб-страницы.

### ✅ ПРАВИЛЬНО - Запуск в консоли расширения

1. **Откройте DevTools расширения:**
   - Нажмите F12 или правой кнопкой мыши → "Просмотреть код"
   - Перейдите на вкладку **"Console"**
   - В выпадающем списке контекста выберите **"Agent Plugins Platform"** (не "top" или "main frame")

2. **Скопируйте и вставьте тестовый скрипт:**
   ```javascript
   // Весь код из ozon-test.js
   ```

3. **Запустите тесты:**
   ```javascript
   ozonTestSystem.runOzonTests()
   ```

### Альтернативный способ - через DevTools Panel

1. **Откройте DevTools расширения**
2. **Перейдите на вкладку "Agent Plugins Platform"**
3. **Откройте консоль в этой вкладке**
4. **Запустите тестовый скрипт**

### Проверка результатов

После запуска тестов:

1. **В DevTools расширения перейдите на вкладку "Чаты плагинов"** - там должны появиться созданные чаты
2. **Перейдите на вкладку "Логи"** - там должны появиться тестовые логи
3. **В консоли должны быть сообщения об успешном выполнении**

### Отладка

Если возникают проблемы:

1. **Проверьте контекст консоли** - должен быть выбран "Agent Plugins Platform"
2. **Убедитесь, что расширение активно** на странице Ozon
3. **Проверьте, что страница загружена полностью**
4. **Посмотрите на ошибки в консоли** - они покажут, что именно не работает

### Структура тестов

Тестовый скрипт создает:

- **Чаты для ozon-analyzer** с тестовыми сообщениями
- **Чаты для test-chat-plugin** с простыми сообщениями  
- **Тестовые логи** разных уровней (info, success, debug)
- **Черновики** для демонстрации функциональности

Все данные сохраняются в IndexedDB и отображаются в DevTools панели расширения. 