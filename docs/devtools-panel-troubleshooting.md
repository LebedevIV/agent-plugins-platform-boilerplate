# DevTools Panel Troubleshooting Guide

## ✅ РЕШЕНИЕ ПРОБЛЕМЫ (2025-07-12)

**Проблема была решена!** Основная причина заключалась в неправильной конфигурации манифеста.

### Что было исправлено:
1. **В `chrome-extension/manifest.ts`** изменили:
   ```typescript
   // БЫЛО:
   devtools_page: 'devtools-panel/index.html'
   
   // СТАЛО:
   devtools_page: 'devtools/index.html'
   ```

2. **В `pages/devtools/src/index.ts`** обновили название панели:
   ```typescript
   chrome.devtools.panels.create('Agent Platform Tools', '/icon-34.png', '/devtools-panel/index.html');
   ```

### Почему это работало:
- `devtools_page` должен указывать на страницу-инициализатор (`devtools/index.html`), которая вызывает `chrome.devtools.panels.create()`
- `devtools-panel/index.html` - это сама панель, которая создается через API
- Теперь Chrome правильно регистрирует панель "Agent Platform Tools"

### Результат:
После пересборки проекта (`npm run build`) и перезагрузки расширения, панель "Agent Platform Tools" должна появиться в браузере DevTools.

---

## Проблема
Custom DevTools panel "Agent Platform Tools" не появляется в браузере DevTools, несмотря на корректную конфигурацию.

Этот документ описывает шаги по диагностике и устранению проблемы, связанной с отсутствием панели DevTools в расширении Chrome.

## 1. Анализ конфигурации

Основная проблема кроется в конфигурации манифеста расширения.

*   **Исходный манифест (`chrome-extension/manifest.ts`):** В этом файле поле `devtools_page` было некорректно сконфигурировано. Оно указывало напрямую на HTML-файл панели: `devtools-panel/index.html`.
*   **Финальный манифест (`dist/manifest.json`):** В результате сборки это некорректное значение было перенесено в финальный манифест, что и привело к ошибке.

**Ключевое расхождение:** Поле `devtools_page` должно указывать на страницу, ответственную за *создание* панели DevTools с помощью API `chrome.devtools.panels.create()`, а не на HTML-файл самой панели.

## 2. Анализ результатов сборки

Проверка артефактов сборки показала следующее:

*   Файл `pages/devtools-panel/index.html` (исходный код панели) и `dist/devtools-panel/index.html` (результат сборки) собраны корректно.
*   Ошибок в процессе сборки самих HTML-файлов не обнаружено.

Это подтверждает, что проблема не в UI-компоненте панели, а в способе ее регистрации в браузере.

## 3. Основная причина проблемы

**Вывод:** Панель DevTools не отображается, потому что значение `devtools_page` в `manifest.json` указывает на конечный HTML-файл панели (`devtools-panel/index.html`), а должно указывать на страницу-инициализатор (`devtools/index.html`), которая вызывает `chrome.devtools.panels.create()`.

## 4. Предлагаемое решение

Для устранения проблемы необходимо выполнить следующие шаги:

1.  **Изменить манифест:** В файле [`chrome-extension/manifest.ts`](chrome-extension/manifest.ts) измените значение поля `devtools_page` с `devtools-panel/index.html` на `devtools/index.html`.
2.  **Пересобрать проект:** Выполните команду для пересборки проекта, чтобы изменения применились к финальному манифесту `dist/manifest.json`.

## 5. Дальнейшие диагностические шаги

После внесения исправлений и пересборки проекта рекомендуется:

1.  Загрузить обновленное расширение в Chrome.
2.  Открыть инструменты разработчика.
3.  Проверить консоль фонового скрипта (background script) на наличие ошибок, связанных с выполнением `chrome.devtools.panels.create()`.
4.  Убедиться, что кастомная панель DevTools появилась в списке доступных панелей.