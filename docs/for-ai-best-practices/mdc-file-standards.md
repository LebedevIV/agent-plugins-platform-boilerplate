# Стандарты создания правил в .cursor/rules

## Обзор

Этот документ описывает обязательные стандарты для создания правил в папке `.cursor/rules/` с приоритетом `.mdc` файлов над `.md` для лучшей интеграции с AI и механизмами Cursor.

## Ключевые принципы

### 1. Приоритет .mdc файлов
- **Все правила и стандарты** должны быть в формате `.mdc`
- **AI инструкции** и команды - только `.mdc`
- **Архитектурные решения** - только `.mdc`
- **Автоматизация** и workflow - только `.mdc`

### 2. Метаданные обязательны
Каждый `.mdc` файл должен содержать YAML frontmatter:
```yaml
---
description: Краткое описание назначения файла
globs: ["**/*"]  # Паттерны файлов для применения
alwaysApply: true  # Автоматическое применение
---
```

### 3. Автоматическое применение
- `alwaysApply: true` для критических правил
- `alwaysApply: false` для опциональных правил
- `globs` определяет область применения

## Преимущества .mdc файлов

### Для AI ассистентов:
- **Автоматическое чтение** при создании чата
- **Понимание контекста** через `globs`
- **Приоритизация** через `alwaysApply`
- **Связи между правилами** через `related`

### Для Cursor:
- **AI memory-bank интеграция**
- **Автоматическое применение** правил
- **Структурированное хранение** метаданных
- **Улучшенная навигация** по правилам

### Для разработчиков:
- **Четкая структура** правил
- **Автоматическая проверка** через CLI
- **Документированные исключения**
- **Стандартизированный формат**

## Структура .mdc файла

### Обязательные секции:
1. **YAML frontmatter** - метаданные
2. **Заголовок** - название правила
3. **Описание** - назначение и область применения
4. **Правила** - конкретные инструкции
5. **Примеры** - практические случаи
6. **Исключения** - когда правило не применяется

### Пример правильного .mdc файла:
```markdown
---
description: Правила TypeScript - конфигурация, barrel exports, troubleshooting
globs: ["**/*.ts", "**/*.tsx", "**/*.json"]
alwaysApply: true
---

# TypeScript Rules

## Основные принципы
- Использовать strict mode
- Предпочитать barrel exports
- Правильно настраивать paths

## Примеры
```typescript
// ✅ Правильно
export { default as Component } from './component.js';

// ❌ Неправильно
export default Component from './component';
```
```

## Миграция .md → .mdc

### Критерии миграции:
- [ ] Файл содержит правила или инструкции
- [ ] Файл должен применяться автоматически
- [ ] Файл важен для AI понимания проекта
- [ ] Файл не является чистой документацией

### Процесс миграции:
1. **Анализ** - оценить необходимость миграции
2. **Переименование** - `.md` → `.mdc`
3. **Добавление метаданных** - YAML frontmatter
4. **Проверка** - корректность `globs` и `alwaysApply`
5. **Тестирование** - интеграция с AI memory-bank

## Исключения

### Допустимые .md файлы:
- `README.md` - главная документация проекта
- `CHANGELOG.md` - история изменений
- `LICENSE.md` - лицензия
- Временные файлы с префиксом `temp-` или `draft-`
- Внешние ссылки и ресурсы

### Необходимо мигрировать в .mdc:
- Все файлы с правилами и стандартами
- AI инструкции и команды
- Архитектурные решения
- Troubleshooting guides
- Best practices

## Проверка соответствия

### Автоматические проверки:
```bash
# Найти все .md файлы в .cursor/rules
find .cursor/rules -name "*.md" -not -name "README.md"

# Проверить структуру .mdc файлов
node .cursor/rules/check-rules-structure.cjs

# Проверить метаданные
node .cursor/rules/check-rules-structure.cjs --validate-metadata
```

### Ручные проверки:
1. Все ли правила в .mdc формате?
2. Есть ли метаданные во всех .mdc файлах?
3. Корректны ли `globs` и `alwaysApply`?
4. Нужно ли мигрировать какие-то .md файлы?
5. Соответствуют ли исключения критериям?

## Рекомендации для AI ассистентов

### При создании новых правил:
1. **Всегда использовать .mdc** формат
2. **Добавлять обязательные метаданные**
3. **Правильно настраивать `globs`**
4. **Использовать `alwaysApply: true`** для критических правил
5. **Документировать исключения**

### При работе с существующими файлами:
1. **Проверять формат** - .md или .mdc?
2. **Оценивать необходимость миграции**
3. **Предлагать улучшения** метаданных
4. **Следовать стандартам** структуры

### При диагностике проблем:
1. **Проверять метаданные** .mdc файлов
2. **Убеждаться в корректности** `globs`
3. **Проверять интеграцию** с AI memory-bank
4. **Использовать CLI инструменты** для проверки

## Интеграция с AI memory-bank

### Автоматическое добавление:
- .mdc файлы автоматически попадают в AI memory-bank
- Доступны через Настройки / Rules & Memories
- Сохраняются между сессиями
- Применяются при создании новых чатов

### Ручное управление:
- Можно добавить заметки через интерфейс Cursor
- Возможность приоритизации правил
- Связывание связанных правил
- Документирование исключений

## Заключение

Использование .mdc файлов с правильными метаданными является **обязательным стандартом** для всех правил в `.cursor/rules/`. Это обеспечивает:

- ✅ Лучшую интеграцию с AI
- ✅ Автоматическое применение правил
- ✅ Структурированное хранение знаний
- ✅ Улучшенную навигацию и поиск
- ✅ Соответствие best practices Cursor

**Это правило обязательно для всех AI ассистентов и разработчиков!** 